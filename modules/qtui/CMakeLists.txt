SET(K3D_EXTRA_QT_PLUGINS "" CACHE PATH "List of semicolon-delimited Qt plugin directories.")
CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/config.h.in ${CMAKE_CURRENT_BINARY_DIR}/config.h)

QT4_WRAP_CPP(MOC_BUILT_SOURCES viewport.h scene.h main_window.h)
QT4_WRAP_UI(UI_BUILT_SOURCES extrude_faces.ui main_window.ui)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
INCLUDE_DIRECTORIES(${k3d_SOURCE_DIR})
INCLUDE_DIRECTORIES(${k3dsdk_BINARY_DIR})
INCLUDE_DIRECTORIES(${K3D_BOOST_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${K3D_GLIBMM_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${K3D_SIGC_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${QT_INCLUDES})

LINK_DIRECTORIES(${K3D_BOOST_LIB_DIRS})
LINK_DIRECTORIES(${K3D_SIGC_LIB_DIRS})

ADD_DEFINITIONS(-DQT_NO_KEYWORDS)

K3D_BUILD_MODULE(k3d-qtui EXTRA_SOURCES ${MOC_BUILT_SOURCES} ${UI_BUILT_SOURCES})
K3D_CREATE_MODULE_PROXY(k3d-qtui)

TARGET_LINK_LIBRARIES(k3d-qtui k3dsdk)
TARGET_LINK_LIBRARIES(k3d-qtui k3dsdk-qtui)
TARGET_LINK_LIBRARIES(k3d-qtui ${K3D_BOOST_PROGRAM_OPTIONS_LIBS})
TARGET_LINK_LIBRARIES(k3d-qtui ${QT_QTCORE_LIBRARY})
TARGET_LINK_LIBRARIES(k3d-qtui ${QT_QTGUI_LIBRARY})
TARGET_LINK_LIBRARIES(k3d-qtui ${QT_QTOPENGL_LIBRARY})

